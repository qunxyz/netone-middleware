2008-2-13

3) 导出数据,将数据导成PDF返回 配置的![CDATA]中的Table属性的全SQL
4) 导出数据,将数据导成Html返回,使用JSTL做为模板控制样式, 针对T_CS_BUS来实现 配置的![CDATA]中的Table属性的全SQL

分析向导逻辑需要修订
2) 根据真实数据来调整原有的界面,是其更加整理和美观


几个分析主题需要实现清楚, 一开始就进入分析角色


可以修改专题分析的结果xml, 同时也可以读的 专题分析的xml,然后简单编辑后执行看结果,这个不需要保存到xml


SQL与DY 创建模式可以合并在一起都叫做 表单创建,只不过打开的时候让用户去选择类型,然后分别进入不同的设计向导中去

数据库最好要整理下,将动态表单的单独放一个库

SQL表单 在定义字段的时候, 数字类型没有将信息写入


相关的向导应用中,第一步 填写naturalname的时候需要naturalname的有效性

本次做网优项目可以吸收的优点 
1: 在线条件编辑,可以扩充到BI中增加条件的的处理
2: 过滤条件中 多指标的分别编辑处理可以吸收
3: 时间中的连续时间选择可以吸收
4: 规则引擎 drools 需要应用上

分析粒度的选择必须由 表单中的timelevel决定

-----2008-3-1日修订----

在分析向导中,新增加一个第二步 里面是时间模式 和 时间粒度的选择,这个时间粒度 将控制后面的 维度 和 时间内容选择中的时间粒度
同时将时间内容的选择移到第三步骤, 里面需要做一些控制, 时间粒度不允许选择,只可见,同时如果粒度为日那么 时段显示,否则时段隐蔽  -OK

维度选择中 要支持层次选择, 如果选择层次 那实际上是选择了 维度的类型,然后在分析中通过识别这个类型,自动去找相关的维度数据然后做分析应用
如果 支持层次选择,那么必须把树和选择结果隐蔽

过滤步骤分解成两个步骤 1) 选择类型 门限,最值,排列  步骤二 显示出所有的指标列表针对上个步骤的选择类型进行设置数字   -OK

最后一个分析步骤用 黄的 条件处理程序 来替换   -OK

用SQL创建表单问题,1)目前时间改用了timex 没有对其适应  2)最后一个完成步骤没用  3)naturalname 要识别是否已经创建过了

从excel创建数据来源 有问题, 要识别是否是上传递的excel文件, 其次最后一步有问题 如何结束流程,还有调试SQL 应该在新窗体中打开才对

目前对时间的处理 根据 时间选择的要求 只需要 精确处理到 日 和秒 也就是只需要处理 1d 和 1h的数据
其中 1m,1y 都用1d表示 ,1s,1mi 都是 1h   -OK

过滤条件的XML 需要做一些特殊处理! 
1:如果是 最值过滤, 那么xml中的
id为选定的指标名, name为topn , choicenode为页面上手工写入的数字, order 为true, desc如果页面上是选最前那么为true否则为false
2:如果是 门限过滤, 那么xml中的 
id为选定的指标名,name为limit,choicenode为页面上选择的下拉内容+手工写入的数字(如:10),order为 false, desc为false
3:如果是 排序那么 xml中的 name 为 order
id为选顶的指标名,name为order,choicenode为空,order为true,desc如果页面上下拉的为升序那么为false,否则为true

自定义的SQL放在 xml 的 otherinfo 中 (就是最后一步中创建的SQL)

在表格分析中 增加一个 按钮  排序控制, 用户可以打开一个页面选择要按照那个指标排序显示,其中需要注意的是,不要于 指标过滤中预先限定的 order逻辑冲突

3-1 日修订的更正
1) 流程中 指标过滤中 最值和排序 过滤清除,只留下 门限
2) 在最后一个SQL界面上, 展现要补充 a) 将门限的内容放入默认SQL中, b) 将原先的指标 派序的放在改页面上, c)增加一个 输入 寻问 记录数
3) 

重大修订支持多层次选择, 类似原先biweb中的 维度中的弹出菜单. 具体的实现模式是
前台直接将 弹出菜单的 level信息 写入 要用于获得指标组的 node的 level中去即可

后台处理的变化 如果choiceinfo 的xlevel非空,那么说明需要做 多层次选择 这个时候维度的条件需要改变了 
当xlevel为空条件为
 belongx in ('分店3[XMARKTREE.XMARKTREE.FZ]','分店4[XMARKTREE.XMARKTREE.QZ]')
那么当xlevel非空,那么条件要变为 (将之前的中文去掉,改% 同时在后面去掉]加%)
 belongx like '%[XMARKTREE.XMARKTREE.FZ.%' or belongx like '%[XMARKTREE.XMARKTREE.QZ.%'
 
使用中需要注意的, 如果用多层的选择,那么回退的时候,即使删除多层的信息,但是已经选择过的节点上的level的值已经被改

注意层次选择的时候,层次的层次也就是打开层次树的url的 appname为 选择到节点的levelname

selectsvl 树单选也要支持 pagepath 访问,可以直接传入pagepath的保护对象的全名,然后直接从某个路径下开始显示树--OK

BI中可以引入智能分析的概念,意义1: 可以对分析结果进行识别,引入知识库,可以把数据结果和知识库很好的整合在一起,让使用者更好的识别数据
"智能分析的意义其实应该是通过一系列的分析路径，来确定一个问题的多种原因或者可能性，根据经验库给出可能的解决方案"
比如在分析案例中,X超市中 福州地区,分店1,分店2.... 这些维度都对应上一个分析经验库,可以让大家对当前的数据提出意见和建议,让别人在查看统计结果
的时候可以更好的识别数据

SQl数据同步,导入写的很有问题, 导入的原则是 1) 数据来源要先选好  2) 类似创建SQL表单那样由用户自己创建表视图,其中必须注意的是
所有视图的别名必须于要导入的表的字段一致

改造ViewModel对象和选择结果的应用, 让实现一个基于ViewModel可以实现任何分析的程序(Servelt)
然后实现两个标签 1个是用于获得 viewmodel的值,一个用于设置图表的参数,一个用于接收并且展现图表
然后将BI中的图表表现模式全部替换掉,更加的灵活,同时考虑下如何实现图片的cache

Sample 无法使用了?

树图还可以找邻元素,点一个节点 可以打开一个列表或者另一个树(邻树),然后选择树上的节点加入选择中,
其中需要注意,邻树的类型必须于改节点是一样的

BI是必须支持二次开发和订制的才有意义,所以大量的功能最好做成标签的形式来使用.--否定
目前这个已经是支持BI是必须支持二次开发和订制 --OK

Bi的选择模块的 整理 比如:树图,时间,过滤,指标 可以单独做成一个页面,然后在需要的时候通过include方式
将他们集中在一个大页面上,就比如 我们现在的biWeb首页来应用..

Bi中 还需要支持一种图表展现,就是单网元,多指标,多时间, 也就是原先的网元-时间 图表中不支持关联分析的
解决, 通过多图来表示处理,这个在宁夏BI中已经做过处理,希望能集成到Bi中

预测分析中的 如果删除选定的时间的时候,如果是删除中间的时间,会出错误,建议的做法是把删除选定去掉
, 每次要切换时间的时候,通过自选择新的结束时间点来适应
预测中的选择时间的粒度 无法与原先的时间粒度匹配
过滤中, 最值有问题

Bi中一直使用的时间控件有问题,无法选择到小时数据8时,9时
